---
title: Linux用户权限
---

### 目录权限

可读权限: 如果目录没有可读权限, 则无法用ls等命令查看目录中的文件内容。

可写权限: 如果目录没有可写权限, 则无法在目录中创建文件, 也无法在目录中删除文件。

可执行权限: 如果目录没有可执行权限, 则无法cd到目录中。

### 用户
创建用户：useradd <用户名>

设置密码：passwd <用户名>

删除用户：userdel <用户名>

### 用户组
新建用户组：groupadd <用户组名称>

创建用户并将其加入到用户主组，每个用户有且只有一个主用户组：useradd -g <用户组名> <用户名>

``` bash
useradd -m -d /home/test -s /bin/bash test
```
-m 创建用户主目录

-d 指定创建的目录路径

-s 指定用户登录Shell

创建用户并将其加入到用附属用户组，每个用户可以有多个附属用户组（常用）：

``` bash
useradd -G <用户组名> <用户名>
```

如果在创建用户时没有指定附属组，可以使用usermod命令添加
``` bash
usermod -a -G <用户组名> <用户名>
```
也可以使用usermod更新用户主组
``` bash
usermod -g <新用户组名> <用户名>
```
将用户从用户组中删除
``` bash
gpasswd -d <用户名> <用户组名>
```

### linux查看用户组下所有用户

使用cat和grep命令查看并过滤/etc/group文件信息
/ect/group 文件是用户组配置文件，即用户组的所有信息都存放在此文件中。
此文件中每一行各代表一个用户组。各用户组中，还是以 : 作为字段之间的分隔符，分为 4 个字段，每个字段对应的含义为：

组名：密码：GID：该组中的用户列表

只需使用cat和grep命令查看/etc/group中的内容，并过滤输出指定用户组的信息即可
``` bash
cat /etc/group|grep 组名
```

### 查询当前用户所属用户组
``` bash
groups
```

### 把一个目录或文件赋权给其他用户的方法
``` bash
chown -R test:test <dir>        #修改目录所有者组
usermod -a -G <groupName> test  #组有权限 
chmod -R o+rx <dir>             #给其他用户加目录权限
```

### 创建文件和目录 umask原理
umask有4位，创建文件或目录时只看后3位
如:umask 027  => 000 010 111 
~umask 111 101 000

使用~umask & mask(创建文件时为666) => 110 110 110 
110 110 110 & 111 101 000  => 110 100 000 => rw-r-----

使用~umask & mask(创建目录时为777) => 111 111 111
111 111 111 & 111 101 000  => 111 101 000 => rwxr-x---
 








